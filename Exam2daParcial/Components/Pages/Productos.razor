@page "/productos"

<PageTitle>Productos</PageTitle>

<h1>Productos</h1>

<EditForm Model="_product" OnValidSubmit="Save" class="mb-5">
    <DataAnnotationsValidator />

    <div class="mb-3">
        <label class="form-label">Inventario</label>
        <InputNumber @bind-Value="_product.Inventario" class="form-control" placeholder="Mayor a 0" />
    </div>

    <div class="mb-3">
        <label class="form-label">Nombre</label>
        <InputText @bind-Value="_product.Nombre" class="form-control" placeholder="Nombre del producto" />
    </div>

    <div class="mb-3">
        <label class="form-label">Departamento</label>
        <InputRadioGroup @bind-Value="_product.Departamento" class="d-block">
            <div class="form-check">
                <InputRadio class="form-check-input" Value="Frutas" id="depFrutas" />
                <label class="form-check-label" for="depFrutas">Frutas</label>
            </div>
            <div class="form-check">
                <InputRadio class="form-check-input" Value="Verduras" id="depVerduras" />
                <label class="form-check-label" for="depVerduras">Verduras</label>
            </div>
            <div class="form-check">
                <InputRadio class="form-check-input" Value="Lácteos" id="depLacteos" />
                <label class="form-check-label" for="depLacteos">Lácteos</label>
            </div>
        </InputRadioGroup>
    </div>

    <button type="submit" class="btn btn-primary">Agregar</button>
</EditForm>

<hr />

<h3>Lista de productos agregados</h3>
@if (_store.Count == 0)
{
    <p>No hay productos aún.</p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Inventario</th>
                <th>Departamento</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in _store)
            {
                <tr>
                    <td>@item.Nombre</td>
                    <td>@item.Inventario</td>
                    <td>@item.Departamento</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private Product _product = new();
    private List<Product> _store = new();

    private void Save(EditContext context)
    {
        _store.Add(new Product
            {
                Inventario = _product.Inventario,
                Nombre = _product.Nombre,
                Departamento = _product.Departamento
            });

        _product = new(); // Limpia el formulario después de guardar
    }

    public class Product
    {
        public int Inventario { get; set; }
        public string Nombre { get; set; } = "";
        public string Departamento { get; set; } = "";
    }
}

